extends ../../views/index

block content
	#content 
		header.page-header
			a(href="/sales")
				img(src="/images/backbutton24x24.png", style="margin-left:1%;")
			span.section-title   Liste des clients
		section.sub-content
			.show-grid
				.searchPanel
					span.add-on Rechercher : 
					input#searchCustomerName.m-wrap(style="width:72%", size="16", type="text", placeholder="Nom du client")
					button#search.m-btn(style="font-size:20px; height:34px; background-color:#00AEDB; color:white;")
						i.icon-search-2
				div.row-fluid
					div#customers-container.listview-container.grid-layout.bg-gradient-grayDark
						each customer in customers
							-if (session.selectedCustomer == customer._id)
								div(id="#{customer._id}").customerItem.mediumListIconTextItem.selected
									b.icon-users.mediumListIconTextItem-Image
									.mediumListIconTextItem-Detail
										h4 #{customer.customerCode} - #{customer.customerName}
										h6 #{customer.description}
							-else 
								div(id="#{customer._id}").customerItem.mediumListIconTextItem
									b.icon-users.mediumListIconTextItem-Image
									.mediumListIconTextItem-Detail
										h4 #{customer.customerCode} - #{customer.customerName}
										h6 #{customer.description}



		br
		.app-bar.fg-color-white
			a#homeBtn(href="/").win-command
				span.win-commandimage.win-commandring !
				span.win-label Accueil
			hr.win-command
			button#addBtn.win-command
				span.win-commandimage.win-commandring 
				span.win-label Ajouter
			button#deleteBtn.win-command.disabled
				span.win-commandimage.win-commandring 
				span.win-label Supprimer
			button#infosBtn.win-command.disabled
				span.win-commandimage.win-commandring &#xe1a5;
				span.win-label Détails 
			hr.win-command
			button#prevBtn.win-command
				span.win-commandimage.win-commandring 
				span.win-label Page préc.
			button#nextBtn.win-command
				span.win-commandimage.win-commandring 
				span.win-label Page suiv.
	//Templates
	script#customer-template(type="text/template")
		b.icon-users.mediumListIconTextItem-Image
		.mediumListIconTextItem-Detail
			h4 <%=model.customerCode%> - <%=model.customerName%>
			h6 <%=model.description%>


block script
	script
		$('#customers-container').on('click', '.mediumListIconTextItem', function(e){
			e.preventDefault();
			$(".mediumListIconTextItem").removeClass('selected');
			$(this).toggleClass('selected');
			$("#deleteBtn").removeClass("disabled");
			$("#infosBtn").removeClass("disabled");
		});

		$("#infosBtn").on('click', function(e){
			var idBtn = arguments[0].currentTarget.id;
			var idCustomer = $(".mediumListIconTextItem.selected").attr('id');
			window.location.href = '/sales/customer/'+idCustomer;
		})	
	
	